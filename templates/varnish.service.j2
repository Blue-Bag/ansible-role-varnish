#{ansible_managed}

[Unit]
Description=Varnish HTTP accelerator

[Service]
Type=forking
LimitNOFILE=131072
LimitMEMLOCK=82000
ExecStartPre=/usr/sbin/varnishd -C -f /etc/varnish/{{ varnish_default_vcl }}
ExecStart=/usr/sbin/varnishd -a :{{varnish_listen_port}} -T localhost:{{varnish_admin_listen_port}}  -P /var/run/varnishd.pid -f {{ varnish_config_path }}/{{ varnish_default_vcl }} -S /etc/varnish/secret -s malloc,256m
ExecReload=/usr/share/varnish/reload-vcl

[Install]
WantedBy=multi-user.target